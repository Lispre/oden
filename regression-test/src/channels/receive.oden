package channels/receive/main

countDown(n) = {
  if n <= 0 then "I'm slow." else countDown(n - 1)
}

main : -> ()
main() =
  let c = bidirectional_channel(2)
      r = receiver(c)
      s = sender(c)
      msg = go countDown(1000000)
  in {
    println("Running...")
    s <- "I'm fast!"
    s <- (<-msg)
    println(<-r)
    println(<-r)
  }
